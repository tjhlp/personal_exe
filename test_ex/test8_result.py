# -*- coding: utf-8 -*-
# File              : test8_result.py
# Author            : tjh
# Create Date       : 2020/07/17
# Last Modified Date: 2020/07/17
# Last Modified By  : tjh
# Reference         :
# Description       :
# ******************************************************

import requests

data1 = {"code": 0, "msg": "success", "data": {
    "data": [["1", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["2", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["3", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["4", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["5", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["6", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["7", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["8", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["9", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["10", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["11", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["12", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["13", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["14", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["15", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["16", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["17", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["18", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["19", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["20", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["21", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["22", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["23", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["24", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["25", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["26", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["27", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["28", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["29", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["30", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["31", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["32", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["33", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["34", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["35", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["36", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["37", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["38", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["39", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["40", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["41", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["42", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["43", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["44", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["45", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["46", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["47", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["48", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["49", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["50", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["51", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["52", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["53", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["54", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["55", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["56", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["57", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["58", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["59", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["60", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["61", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["62", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["63", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["64", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["65", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["66", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["67", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["68", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["69", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["70", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["71", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["72", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["73", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["74", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["75", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["76", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["77", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["78", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["79", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["80", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["81", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["82", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["83", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["84", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["85", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["86", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["87", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["88", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["89", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["90", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["91", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["92", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["93", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["94", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["95", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["96", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["97", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["98", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"],
             ["99", 0, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"], ["100", 1, 1, 1.0, {"0": 0.0, "1": 1.0}, "train"]],
    "meta": {"header": ["id", "label", "predict_result", "predict_score", "predict_detail", "type"]},
    "retmsg": "success", "retcode": 0}}
params = {
    "component_name": "hetero_lr_0",
    # "job_id": "2020071702325350322834",
    "job_id": "2020071706025600004236",
    # "job_id": "2020071708130620591650",
    "party_id": "10006",
    "role": "guest",
}
# url = "http://192.168.1.122:9380/v1/tracking/component/output/data"
# rsp = requests.post(url=url, json=params)
# print(rsp.text)
# print(data1['data']['data'])
# print(data1['data']['meta'])

# 下载文件
url = 'http://192.168.1.122:9380/v1/tracking/component/output/data/download'
rsp = requests.get(url=url, json=params, stream=True)
with open('output_data.tar.gz', "wb") as f:
    for chunk in rsp.iter_content(chunk_size=512):
        if chunk:
            f.write(chunk)

# import os, tarfile
#
# try:
#     t = tarfile.open('output_data.tar.gz')
#     t.extractall(path=r'D:\personal\exercise\personal_exe\test_ex')
# except Exception as e:
#     print(e)

